@page
@model FOKE.Pages.CommitteManagement.AddMemberModel
@using FOKE.Localization
@inject ISharedLocalizer Localize
@{
    Layout = "_LayoutStandaloneContent";
}
<form method="post" id="memberForm" enctype="multipart/form-data"  autocomplete="off">
    @Html.AntiForgeryToken()

    <div class="card">
        <div class="card-body">
            <div class="col-12" id="response">
                @if (!string.IsNullOrEmpty(Model.pageErrorMessage))
                {
                    <div class="alert alert-dismissible fade show bg-light-danger border border-light-danger shadow-lg rounded-3 p-3 w-100 d-flex flex-column align-items-center text-center" role="alert">
                        <i class="ki-duotone ki-info-circle fs-2 text-danger me-3"></i>
                        <div class="flex-grow-1 fw-bold text-dark">
                            <strong></strong> @Model.pageErrorMessage
                        </div>
                        <button type="button" class="btn-close position-absolute top-50 end-0 translate-middle-y me-3" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                }
            </div>
            <input type="hidden" asp-for="_formMode" />
            <input type="hidden" asp-for="inputModel.CommitteMemberId" />
            <input type="hidden" asp-for="inputModel.loggedinUserId" value="@User.FindFirst("Userid")?.Value" />
            <input type="hidden" asp-for="inputModel.IssueId" />
            <div class="row">
     
                <div class="mb-4 border rounded shadow-sm p-4" style="background: #eaf4fd; border-left: 4px solid #007bff;">
                    <div class="mb-3">
                        <span class="fw-bold text-primary" style="min-width: 130px; display: inline-block;">👤 @Localize.Localize("MEMBER_ID"):</span>
                        <span class="text-dark">@Model.MemberId</span>
                    </div>
                    <div>
                        <span class="fw-bold text-primary" style="min-width: 130px; display: inline-block;">📛 @Localize.Localize("MEMBER_NAME"):</span>
                        <span class="text-dark">@Model.MemberName</span>
                    </div>
                </div>


                <!-- Group Dropdown -->
                <div class="col-12 mb-5">
                    <div class="form-group">
                        <label class="required fs-6 fw-semibold mb-2">@Localize.Localize("SELECT_GROUP")</label>
                     
                        <select asp-for="inputModel.GroupId"
                                class="form-select form-select-sm select2"
                                asp-items='@new SelectList(Model.GroupList, "keyID", "name")'>
                            <option value="">@Localize.Localize("Select")</option>
                        </select>
                        <span asp-validation-for="inputModel.GroupId" class="text-danger"></span>
                    </div>
                </div>
                   <div class="col-12 mb-5">
                    <div class="form-group">
                        <label asp-for="inputModel.Photo" class="form-label fs-6 fw-semibold"></label>
                        <input asp-for="inputModel.Photo" type="file" class="form-control form-control-sm" />
                        <span asp-validation-for="inputModel.Photo" class="text-danger"></span>

                        @* Show current photo preview if exists *@
                        @if (!string.IsNullOrEmpty(Model.inputModel.ImageName) && Model.inputModel.AttachmentAny)
                        {
                            <div id="fileActions" class="mt-2 p-2 border rounded d-flex align-items-center"
                                 style="background: #f8f9fa; border: 1px solid #ddd;">

                                <a href="@Url.Content("~" + Model.inputModel.ImagePath)"
                                   class="text-primary me-3"
                                   data-url="@Url.Content("~" + Model.inputModel.ImagePath)"
                                   style="text-decoration: none;">
                                    📄 @Model.inputModel.ImageName
                                </a>

                                <img src="@Url.Content("~" + Model.inputModel.ImagePath)" alt="Current Photo"
                                     style="max-height: 80px; max-width: 80px; object-fit: contain;" />
                            </div>
                        }
                    </div>
                </div>

                <!-- Name -->
                <div class="col-12 mb-5">
                    <div class="form-group">
                        <label class="fs-6 fw-semibold mb-2"> @Localize.Localize("LINE1")</label>
                        <input asp-for="inputModel.Name" class="form-control form-control-sm" placeholder="@Localize.Localize("Enter name")" />
                        <span asp-validation-for="inputModel.Name" class="text-danger"></span>
                    </div>
                </div>

                <!-- Position -->
                <div class="col-12 mb-5">
                    <div class="form-group">
                        <label class=" form-label fs-6 fw-semibold">@Localize.Localize("LINE2")</label>
                        <input asp-for="inputModel.Position" class="form-control form-control-sm" placeholder="@Localize.Localize("Enter position")" />
                        <span asp-validation-for="inputModel.Position" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-12 mb-5">
                    <div class="form-group">
                        <label class=" form-label-new">@Localize.Localize("LINE3")</label>
                        <div class="input-group">
                            <input asp-for="inputModel.AnyValue" class="form-control form-control-sm" placeholder="Enter Contact" />
                        </div>

                       @*  <span id="ContactNoError" class="text-danger" style="display: none;"></span>
                        <span asp-validation-for="inputModel.ContactNo" class="text-danger"></span> *@
                    </div>
                </div>

          

                <!-- Sort Order -->
                <div class="col-12 mb-5">
                    <div class="form-group">
                        <label class="form-label fs-6 fw-semibold">@Localize.Localize("SORT_ORDER")</label>
                      
                        <input asp-for="inputModel.SortOrder" class="form-control form-control-sm" type="number" placeholder="@Localize.Localize("Enter_SORT_ORDER")" />
                        <span asp-validation-for="inputModel.SortOrder" class="text-danger"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="card-footer bg-light">
            <div class="row">
                <div class="col-6 text-start">
                    <button type="button" class="btn btn-secondary btn-flat btn-sm" id="btnClear">
                        <i class="fas fa-times me-1"></i> @Localize.Localize("BTN_CLEAR")
                    </button>
                </div>
                <div class="col-6 text-end">
                    <button type="submit" name="btnSubmit" value="btnSave" class="btn btn-primary btn-flat btn-sm btn-req-loader"><i class="far fa-save"></i> @Localize.Localize("BTN_SAVE")</button>
                    <button type="submit" name="btnSubmit" id="btnRefresh" value="btnRefresh" class="btn btn-outline-primary btn-sm d-none btn-req-loader" formnovalidate="formnovalidate">@Localize.Localize("BTN_REFRESH")</button>
                  
                </div>
            </div>
        </div>
    </div>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
   
          <script type="text/javascript">
        $(document).ready(function (e) {
                  $("#btnClear").click(function () {

                      $("#memberForm")[0].reset();

                  });

                  top.hidePageLoader();
                  $.validator.unobtrusive.parse("#memberForm");

                  $('.role-code').change(function () {
                      var selectedValue = $(this).val();
                      $("#btnRefresh").click();
                  });
              });
              if ("@Model.IsSuccessReturn" == "True") {
                  top.Swal.fire({
                      icon: 'success',
                      buttonsStyling: false,
                      title: "@Html.Raw(@Model.sucessMessage)",
                      showConfirmButton: false,
                      timer: 1500
                  })
                  top.hidePopupWithRefresh('btnRefresh');
              }


    </script>

}



      



