	@page
	@model FOKE.Pages.MembersList.AllMembersList.MemberViewModel

	
	@inject ISharedLocalizer Localize
	@using FOKE.Localization
	@using FOKE.Models.PageModels
	@{
	}
	<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

	<div id="kt_app_content" class="app-content flex-column-fluid">
		<div id="kt_app_content_container" class="app-container container-xxl">
			<div class="card">
				<div class="container mt-4"> <!-- This adds spacing similar to the second section -->
				<div class="card shadow-lg rounded overflow-hidden mb-5">
					<!-- Task Header with Gradient Background -->
					<div class="p-4 text-white fw-bold fs-3" style="background: linear-gradient(to right, #4da0f3, #007bff);">
						🧑‍💼 @* @Localize.Localize("TASK_NUMBER") : @Model.inputModel.TaskNumber *@ Membership Details
					</div>

					<!-- Task Content (Unchanged, but now with shadow) -->
					<div class="card-body shadow-sm p-4 bg-white rounded">
						<h4 class="fw-bold mb-4 border-bottom pb-2 text-primary">
							<i class="bi bi-person-lines-fill me-2"></i> Personal Information
						</h4>
						<div class="container ms-5">
						<div class="row g-4">
							@* Row 1 *@
							<div class="col-md-4">
								<div class="fw-semibold fs-7 text-gray-600  ">Name:</div>
								<div class="fw-bold fs-5 text-dark">Dominic</div>
							</div>
							<div class="col-md-4">
								<div class="fw-semibold fs-7 text-gray-600 ">Civil ID:</div>
									<div class="fw-bold fs-5 text-dark">234-567-890123</div>
							</div>
								<div class="col-md-4">
									<div class="fw-semibold fs-7 text-gray-600 ">Passport No:</div>
									<div class="fw-bold fs-5 text-dark">K1234567</div>
								</div>
								<div class="col-md-4">
									<div class="fw-semibold fs-7 text-gray-600 ">Date of Birth:</div>
									<div class="fw-bold fs-5 text-dark">09-03-1995</div>
								</div>
								<div class="col-md-4">
									<div class="fw-semibold fs-7 text-gray-600 ">Gender:</div>
									<div class="fw-bold fs-5 text-dark">Male</div>
								</div>

						

							@* Row 2 *@
							
							<div class="col-md-4">
								<div class="fw-semibold fs-7 text-gray-600 ">Blood Group:</div>
								<div class="fw-bold fs-5 text-dark">A+</div>
							</div>

							@* Row 3 *@
							<div class="col-md-4">
								<div class="fw-semibold fs-7 text-gray-600 ">Profession:</div>
									<div class="fw-bold fs-5 text-dark"> Doctor</div>
							</div>
							<div class="col-md-4">
								<div class="fw-semibold fs-7 text-gray-600 ">Work Place:</div>
									<div class="fw-bold fs-5 text-dark"> Kuwait Hospital</div>
							</div>
							<div class="col-md-4">
								<div class="fw-semibold fs-7 text-gray-600 ">Contact Number:</div>
									<div class="fw-bold fs-5 text-dark"> +965 99887766</div>
							</div>

							@* Row 4 *@
							<div class="col-md-4">
								<div class="fw-semibold fs-7 text-gray-600 ">Email:</div>
								<div class="fw-bold fs-5 text-dark">dominic@gmail.com</div>
							</div>

								<div class="col-md-4">
									<div class="fw-semibold fs-7 text-gray-600 ">District:</div>
									<div class="fw-bold fs-5 text-dark">Farwaniya</div>
								</div>

							<div class="col-md-4">
								<div class="fw-semibold fs-7 text-gray-600 ">Area:</div>
									<div class="fw-bold fs-5 text-dark">Farwaniya</div>
							</div>
							


						</div>


							<div class="mb-5"></div>
							<div class="px-0 mt-4">
								<hr class="my-4" />
							<!-- For Office Use Only -->
							<div class="border rounded p-4 bg-light mb-4">
								<h5 class="fw-bold mb-4">For Office Use Only</h5>

								<div class="row">
									<div class="col-md-6 mb-4">
										<label for="Zone" class="required fs-6 fw-semibold mb-2">Zone</label>
										<select id="Zone" class="form-select">
											<option value="">Select</option>
											<option>North</option>
											<option>South</option>
											<option>East</option>
											<option>West</option>
										</select>
										<span id="ZoneValidation" class="text-danger"></span>
									</div>

									<div class="col-md-6 mb-4">
										<label for="OfficeArea" class="required fs-6 fw-semibold mb-2">Unit</label>
										<select id="OfficeArea" class="form-select">
											<option value="">Select</option>
											<option>Unit 1</option>
											<option>Unit 2</option>
											<option>Unit 3</option>
											<option>Unit 4</option>
										</select>
										<span id="OfficeAreaValidation" class="text-danger"></span>
									</div>
								</div>
							</div>
								<hr class="my-4" />
							<!-- Fee Collection -->
							<div class="border rounded p-4 bg-light mb-4">
								<h5 class="fw-bold mb-4">Fee Collection</h5>

								<div class="row">
									<div class="col-md-6 mb-4">
										<label for="Campaign" class="required fs-6 fw-semibold mb-2">Campaign</label>
										<select id="Campaign" class="form-select">
											<option value="">Select</option>
											<option>General</option>
											<option>Scholarship Drive</option>
											<option>Special Waiver</option>
										</select>
										<span id="CampaignValidation" class="text-danger"></span>
									</div>

									<div class="col-md-6 mb-4">
										<label for="Amount" class="required fs-6 fw-semibold mb-2">Amount</label>
										<input type="text" id="Amount" class="form-control" placeholder="Enter amount" />
										<span id="AmountValidation" class="text-danger"></span>
									</div>

									<div class="col-md-6 mb-4">
										<label for="AmountReceived" class="required fs-6 fw-semibold mb-2">Amount Received</label>
										<input type="text" id="AmountReceived" class="form-control" placeholder="Amount Received" />
										<span id="AmountReceivedValidation" class="text-danger"></span>
									</div>

									<div class="col-md-6 mb-4">
										<label for="PaymentType" class="required fs-6 fw-semibold mb-2">Payment Type</label>
										<select id="PaymentType" class="form-select">
											<option value="">Select</option>
											<option>Credit Card</option>
											<option>Debit Card</option>
											<option>Cash</option>
										</select>
										<span id="PaymentTypeValidation" class="text-danger"></span>
									</div>

									<div class="col-md-12 mb-4">
										<label for="PaymentRemarks" class="required fs-6 fw-semibold mb-2" >Payment Remarks</label>
											<textarea id="PaymentRemarks" class="form-control" placeholder="Payment Remarks" rows="2"></textarea>
										@* <textarea id="PaymentRemarks" class="form-control" rows="1"  style="height: 38px;" placeholder="Enter remarks..."></textarea> *@
										<span id="PaymentRemarksValidation" class="text-danger"></span>
									</div>
								</div>
							</div>
								<hr class="my-4" />
							<!-- Request Action -->
								<div class="border rounded p-4 bg-light mb-5">
									<h5 class="fw-bold mb-4">Request Action</h5>

									<!-- Row 1: Action + Reason (Reason is hidden by default) -->
									<div class="row mb-3">
										<!-- Action Dropdown -->
										<div class="col-md-6">
											<label for="requestActionDropdown" class="form-label">Action</label>
											<select id="requestActionDropdown" class="form-select">
												<option value="" selected disabled>Select an action</option>
												<option value="accept">Accept</option>
												<option value="reject">Reject</option>
											</select>
										</div>

										<!-- Reject Reason (Initially hidden) -->
										<div class="col-md-6 d-none" id="rejectReasonContainer">
											<label for="reqRejectionReason" class="form-label">Reason</label>
											<select id="reqRejectionReason" class="form-select">
												<option value="">Select Reason</option>
												<option>Invalid Request</option>
												<option>Data Mismatch</option>
												<option>Not Eligible</option>
											</select>
										</div>
									</div>

									<!-- Row 2: Rejection Remarks -->
									<div class="row mb-3 d-none" id="rejectRemarksRow">
										<div class="col-md-12">
											<label for="reqRejectionNotes" class="form-label">Rejection Remarks</label>
											<textarea id="reqRejectionNotes" class="form-control" rows="2" placeholder="Enter rejection remarks..."></textarea>
										</div>
									</div>

									<!-- Accept Details -->
									<div id="reqAcceptDetails" class="d-none">
										<div class="form-check mb-3">
											<input class="form-check-input" type="checkbox" id="reqTermsCheckbox">
											<label class="form-check-label" for="reqTermsCheckbox">
												Following the successful verification of the provided information, the membership is hereby approved and issued.
											</label>
										</div>
										<div class="text-center">
											<button type="button" class="btn btn-success" id="reqConfirmIssueBtn" disabled>Confirm Issue</button>
										</div>
									</div>

									<!-- Reject Button -->
									<div class="text-center d-none" id="reqRejectBtnContainer">
										<button type="button" class="btn btn-danger" id="reqRejectConfirmBtn">Reject</button>
									</div>
								</div>


							</div>

						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
</div>



<!-- Modal Layout -->
<div class="modal fade" id="cancelModal" tabindex="-1" aria-labelledby="cancelModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<!-- Centered vertically -->
		<div class="modal-content shadow rounded-4">
			<div class="modal-header bg-danger" text-white border-bottom-0 rounded-top">
				<h3 class="modal-title text-white fw-bold" id="cancelModalLabel">Cancel Membership</h3>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>

			<div class="modal-body">
				<form id="cancelForm">
					<div class="mb-3">
						<label for="cancelReason" class="form-label">Cancellation Reason</label>
						<select class="form-select" id="cancelReason" required>
							<option value="">-- Select --</option>
							<option value="duplicate">Duplicate Entry</option>
							<option value="not_needed">Not Needed</option>
							<option value="other">Other</option>
						</select>
					</div>
					<div class="mb-3">
						<label for="cancelDesc" class="form-label">Cancellation Remark</label>
						<textarea class="form-control" id="cancelDesc" rows="3" placeholder="Enter more details..."></textarea>
					</div>
				</form>
			</div>

			<div class="modal-footer border-top-0">
				<button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
				<button type="button" class="btn btn-danger" onclick="submitCancellation()">Submit</button>
			</div>
		</div>
	</div>
</div>

<!-- Add SweetAlert2 CDN -->
<script type="text/javascript">

	 $(document).ready(function (e) {
		   const campaignAmounts = {
		"General": 5000,
		"Scholarship Drive": 4000,
		"Special Waiver": 1000
	};

	// Trigger event on Campaign change
	$('#Campaign').change(function () {
		const selectedCampaign = $(this).val();

		if (selectedCampaign && campaignAmounts[selectedCampaign] !== undefined) {
			const amount = campaignAmounts[selectedCampaign];

			// Set the amount in the Amount field and disable it
			$('#Amount').val(amount).prop('disabled', true);
		} else {
			// If no campaign is selected or invalid, reset the field
			$('#Amount').val('').prop('disabled', false);
		}
	});










				// Hide both sections initially
	$("#reqAcceptDetails").hide();
	$("#reqRejectDetails").hide();

	// Handle dropdown selection
	$("#requestActionDropdown").change(function () {
		const action = $(this).val();

	if (action === "accept") {
		// Show accept panel
		$("#reqAcceptDetails").removeClass("d-none").show();

		// Hide rejection-related fields
		$("#rejectReasonContainer, #rejectRemarksRow, #reqRejectBtnContainer").addClass("d-none").hide();
	} else if (action === "reject") {
		// Show rejection fields
		$("#rejectReasonContainer, #rejectRemarksRow, #reqRejectBtnContainer").removeClass("d-none").show();

		// Hide accept panel
		$("#reqAcceptDetails").addClass("d-none").hide();
	} else {
		// Hide all
		$("#reqAcceptDetails, #rejectReasonContainer, #rejectRemarksRow, #reqRejectBtnContainer").addClass("d-none").hide();
	}
	});

	// Enable/disable confirm button when checkbox is toggled
	$('#reqTermsCheckbox').change(function () {
		$('#reqConfirmIssueBtn').prop('disabled', !this.checked);
	});

	// Confirm Issue
	$('#reqConfirmIssueBtn').click(function () {
		Swal.fire('Success', 'Request accepted successfully!', 'success');
	});

	// Confirm Rejection
	$('#reqRejectConfirmBtn').click(function () {
		const reason = $('#reqRejectionReason').val();
		const notes = $('#reqRejectionNotes').val();
		if (!reason) {
			Swal.fire('Warning', 'Please select a reason.', 'warning');
			return;
		}
		Swal.fire('Rejected', `Reason: ${reason}<br>Notes: ${notes}`, 'error');
	});

		});

</script>


